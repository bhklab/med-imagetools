
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://bhklab.github.io/med-imagetools/dev/reference/io/writers/abstract_base_writer/">
      
      
        <link rel="prev" href="../../validators/">
      
      
        <link rel="next" href="../index_writer/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Abstract base writer - Med-ImageTools Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#imgtools.io.writers.abstract_base_writer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://bhklab.github.io/med-imagetools" title="Med-ImageTools Documentation" class="md-header__button md-logo" aria-label="Med-ImageTools Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Med-ImageTools Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Abstract base writer
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bhklab/med-imagetools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../usage/autopipeline/" class="md-tabs__link">
          
  
  
    
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../cli/imgtools/" class="md-tabs__link">
          
  
  
    
  
  CLI Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../autopipeline/" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://bhklab.github.io/med-imagetools" title="Med-ImageTools Documentation" class="md-nav__button md-logo" aria-label="Med-ImageTools Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Med-ImageTools Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bhklab/med-imagetools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/autopipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Taming the Chaos: AutoPipeline for Medical Image Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/nnunet_pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nnUNetPipeline: Structured DICOM-to-NIfTI Conversion for Deep Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/core/crawler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crawler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/core/interlacer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interlacer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Writers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Writers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/Writers/BaseWriter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abstract Base Writer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage/Writers/ImplementingWriters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending the AbstractBaseWriter class
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CLI Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CLI Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/imgtools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    imgtools CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cli/shell-completion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shell Completion
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../autopipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autopipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../autopipeline_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autopipeline utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../nnunet_pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nnunet pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Coretypes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Coretypes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/base_masks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base masks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/base_medimage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base medimage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_4" >
        
          
          <label class="md-nav__link" for="__nav_4_5_4" id="__nav_4_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Imagetypes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            Imagetypes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/imagetypes/dose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/imagetypes/pet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/imagetypes/scan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5_5" id="__nav_4_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Masktypes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_5">
            <span class="md-nav__icon md-icon"></span>
            Masktypes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/masktypes/roi_matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roi matching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/masktypes/seg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seg
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/masktypes/structureset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Structureset
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_6" >
        
          
          <label class="md-nav__link" for="__nav_4_5_6" id="__nav_4_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Spatial types
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_6">
            <span class="md-nav__icon md-icon"></span>
            Spatial types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/spatial_types/coord_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coord types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/spatial_types/direction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Direction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../coretypes/spatial_types/image_geometry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image geometry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Dicom
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Dicom
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_find/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dicom find
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_reader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dicom reader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/interlacer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interlacer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/read_tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Read tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6_6" id="__nav_4_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Crawl
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_6">
            <span class="md-nav__icon md-icon"></span>
            Crawl
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/crawl/crawler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crawler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/crawl/parse_dicoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parse dicoms
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_7" >
        
          
          <label class="md-nav__link" for="__nav_4_6_7" id="__nav_4_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dicom metadata
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_7">
            <span class="md-nav__icon md-icon"></span>
            Dicom metadata
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/extractor_base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extractor base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/extractors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extractors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_7_4" >
        
          
          <label class="md-nav__link" for="__nav_4_6_7_4" id="__nav_4_6_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modality utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_7_4">
            <span class="md-nav__icon md-icon"></span>
            Modality utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/modality_utils/rtdose_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rtdose utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/modality_utils/rtplan_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rtplan utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/modality_utils/rtstruct_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rtstruct utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/modality_utils/seg_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seg utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/dicom_metadata/modality_utils/sr_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sr utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_8" >
        
          
          <label class="md-nav__link" for="__nav_4_6_8" id="__nav_4_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sort
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_8">
            <span class="md-nav__icon md-icon"></span>
            Sort
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/sort/dicomsorter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dicomsorter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/sort/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/sort/highlighter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Highlighter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/sort/sort_method/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sort method
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dicom/sort/sorter_base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sorter base
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Io
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Io
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nnunet_output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nnunet output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Readers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sample_input/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sample input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sample_output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sample output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_6" checked>
        
          
          <label class="md-nav__link" for="__nav_4_7_6" id="__nav_4_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Writers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7_6">
            <span class="md-nav__icon md-icon"></span>
            Writers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Abstract base writer
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Abstract base writer
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;abstract_base_writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" abstract_base_writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AbstractBaseWriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AbstractBaseWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.index_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;index_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_to_index
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" add_to_index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_all_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;filepath_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;replace_existing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;merge_columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;preview_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" preview_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;resolve_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" resolve_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ExampleWriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ExampleWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.index_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;index_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_to_index
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" add_to_index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_all_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;filepath_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;replace_existing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;merge_columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;preview_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" preview_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;resolve_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" resolve_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;save
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" save">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(content)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ExistingFileMode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.WriterIndexError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;WriterIndexError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index_writer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index writer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nifti_writer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nifti writer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../numpy_writer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Numpy writer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Loggers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Loggers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../loggers/json_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Json logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../loggers/logging_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../loggers/processors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Processors
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Pattern parser
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Pattern parser
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern_parser/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern_parser/pattern_resolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pattern resolver
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Transforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/base_transform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base transform
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/intensity_transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intensity transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/lambda_transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lambda transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/spatial_transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../transforms/transformer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
        
          
          <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/date_time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Date time
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/dictionaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dictionaries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/imageutils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Imageutils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/interlacer_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interlacer utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/nnunet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nnunet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/optional_import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optional import
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/path_limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path limits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/sanitize_file_name/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sanitize file name
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/timer_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timer utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/truncate_uid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Truncate uid
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" >
        
          
          <label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Vizualize
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Vizualize
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../vizualize/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../vizualize/visualizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualizer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../vizualize/visualizer2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualizer2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;abstract_base_writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" abstract_base_writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AbstractBaseWriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AbstractBaseWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.index_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;index_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_to_index
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" add_to_index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_all_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;filepath_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;replace_existing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;merge_columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;preview_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" preview_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;resolve_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" resolve_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ExampleWriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ExampleWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.index_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;index_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_to_index
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" add_to_index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_all_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;filepath_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;replace_existing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;merge_columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;preview_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" preview_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;resolve_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" resolve_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;save
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" save">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(content)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;**kwargs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ExistingFileMode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imgtools.io.writers.abstract_base_writer.WriterIndexError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;WriterIndexError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/bhklab/med-imagetools/edit/master/docs/reference/io/writers/abstract_base_writer.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/bhklab/med-imagetools/raw/master/docs/reference/io/writers/abstract_base_writer.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Abstract base writer</h1>

<div class="doc doc-object doc-module">



<h2 id="imgtools.io.writers.abstract_base_writer" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">abstract_base_writer</span>


<a href="#imgtools.io.writers.abstract_base_writer" class="headerlink" title="Permanent link">#</a></h2>

    <div class="doc doc-contents first">










  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AbstractBaseWriter</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter" class="headerlink" title="Permanent link">#</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">AbstractBaseWriter</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(root_directory)">root_directory</span></span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span> <span class="o">=</span> <span class="n"><span title="dataclasses">dataclasses</span></span><span class="o">.</span><span class="n"><span title="dataclasses.field">field</span></span><span class="p">(),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(filename_format)">filename_format</span></span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="n"><span title="dataclasses">dataclasses</span></span><span class="o">.</span><span class="n"><span title="dataclasses.field">field</span></span><span class="p">(),</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(create_dirs)">create_dirs</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(existing_file_mode)">existing_file_mode</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ExistingFileMode&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExistingFileMode&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode">ExistingFileMode</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ExistingFileMode&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExistingFileMode&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode">ExistingFileMode</a></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExistingFileMode.FAIL">FAIL</span></span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(sanitize_filenames)">sanitize_filenames</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(context)">context</span></span><span class="p">:</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Dict">Dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dict">dict</span></span><span class="p">(),</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(overwrite_index)">overwrite_index</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(absolute_paths_in_index)">absolute_paths_in_index</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter(index_filename)">index_filename</span></span><span class="p">:</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc">abc</span>.<span title="abc.ABC">ABC</span></code>, <code><span title="typing">typing</span>.<span title="typing.Generic">Generic</span>[<a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a>.<span title="imgtools.io">io</span>.<span title="imgtools.io.writers">writers</span>.<a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a>.<span title="imgtools.io.writers.abstract_base_writer.ContentType">ContentType</span>]</code></p>


        <p>Abstract base class for managing file writing with customizable paths and filenames.</p>
<p>This class provides a template for writing files with a flexible directory structure
and consistent file naming patterns. It handles common operations such as directory
creation, file path resolution, and maintaining an index of saved files.</p>
<p>The class supports various file existence handling modes, filename sanitization,
and easy context management for generating dynamic paths with placeholder variables.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.root_directory">root_directory</span></code></td>
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Root directory where files will be saved. This directory will be created
if it doesn't exist and <code>create_dirs</code> is True.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.filename_format">filename_format</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format string defining the directory and filename structure.
Supports placeholders for context variables enclosed in curly braces.
Example: '{subject_id}_{date}/{disease}.txt'</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.create_dirs">create_dirs</span></code></td>
            <td>
                  <code>bool, default=True</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Creates necessary directories if they don't exist.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.existing_file_mode">existing_file_mode</span></code></td>
            <td>
                  <code>ExistingFileMode, default=ExistingFileMode.FAIL</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Behavior when a file already exists.
Options: OVERWRITE, SKIP, FAIL</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.sanitize_filenames">sanitize_filenames</span></code></td>
            <td>
                  <code>bool, default=True</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Replaces illegal characters from filenames with underscores.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.context">context</span></code></td>
            <td>
                  <code>Dict[str, Any], default={}</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Internal context storage for pre-checking.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.index_filename">index_filename</span></code></td>
            <td>
                  <code>Optional[str], default=None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the index file to track saved files.
If an absolute path is provided, it will be used as is.
If not provided, it will be saved in the root directory with the format
of {root_directory.name}_index.csv.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.overwrite_index">overwrite_index</span></code></td>
            <td>
                  <code>bool, default=False</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Overwrites the index file if it already exists.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.absolute_paths_in_index">absolute_paths_in_index</span></code></td>
            <td>
                  <code>bool, default=False</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, saves absolute paths in the index file.
If False, saves paths relative to the root directory.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.pattern_resolver">pattern_resolver</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a>.<span title="imgtools.pattern_parser">pattern_parser</span>.<a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PatternResolver&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;imgtools.pattern_parser.PatternResolver&lt;/code&gt;)" href="../../../pattern_parser/pattern_resolver/#imgtools.pattern_parser.pattern_resolver.PatternResolver">PatternResolver</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Instance used to handle filename formatting with placeholders.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="properties" open>
  <summary>Properties</summary>
  <p>index_file : Path
    Returns the path to the index CSV file.</p>
</details>

<details class="note" open>
  <summary>Notes</summary>
  <p>When using this class, consider the following best practices:
1. Implement the abstract <code>save</code> method in subclasses to handle the actual file writing.
2. Use the <code>preview_path</code> method to check if a file exists before performing expensive operations.
3. Use the class as a context manager when appropriate to ensure proper resource cleanup.
4. Set appropriate file existence handling mode based on your application's needs.</p>
</details>







<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;add_to_index&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index">add_to_index</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Add or update an entry in the shared CSV index file using IndexWriter.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;clear_context&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context">clear_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear the context for the writer.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;preview_path&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path">preview_path</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Pre-checking file existence and setting up the writer context.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;resolve_path&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path">resolve_path</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generate a file path based on the filename format, subject ID, and</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;save&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-abstractmethod&quot;&gt;&lt;code&gt;abstractmethod&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save">save</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Abstract method for writing data. Must be implemented by subclasses.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;set_context&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context">set_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the context for the writer.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>





  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.index_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">index_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.index_file" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">index_file</span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the path to the index CSV file.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_to_index</span>


<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">add_to_index</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;path&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)">path</a></span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;include_all_context&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)">include_all_context</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;filepath_column&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)">filepath_column</a></span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;replace_existing&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)">replace_existing</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;merge_columns&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)">merge_columns</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add or update an entry in the shared CSV index file using IndexWriter.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Logs the file's path and associated context variables to a
    shared CSV index file.</li>
<li>Uses IndexWriter to safely handle concurrent writes and schema evolution.</li>
</ul>
<p><strong>When to Use It</strong>:</p>
<ul>
<li>Use this method to maintain a centralized record of saved
files for auditing or debugging.</li>
</ul>


<details class="**relevant-writer-parameters**" open>
  <summary><strong>Relevant Writer Parameters</strong></summary>
  <ul>
<li>
<p>The <code>index_filename</code> parameter allows you to specify a
custom filename for the index file.
By default, it will be named after the <code>root_directory</code>
with <code>_index.csv</code> appended.</p>
</li>
<li>
<p>If the index file already exists in the root directory,
it will overwrite it unless
the <code>overwrite_index</code> parameter is set to <code>False</code>.</p>
</li>
<li>
<p>The <code>absolute_paths_in_index</code> parameter controls whether
the paths in the index file are absolute or relative to the
<code>root_directory</code>, with <code>False</code> being the default.</p>
</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)" class="doc doc-heading doc-heading-parameter">                  <code>path</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(path)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path being saved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)" class="doc doc-heading doc-heading-parameter">                  <code>include_all_context</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(include_all_context)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, write existing context variables passed into writer and
the additional context to the CSV.
If False, determines only the context keys parsed from the
<code>filename_format</code> (excludes all other context variables, and
unused context keys).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)" class="doc doc-heading doc-heading-parameter">                  <code>filepath_column</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(filepath_column)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the column to store the file path. Defaults to "path".</p>
              </div>
            </td>
            <td>
                  <code>&#34;path&#34;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)" class="doc doc-heading doc-heading-parameter">                  <code>replace_existing</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(replace_existing)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, checks if the file path already exists in the index and
replaces it.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)" class="doc doc-heading doc-heading-parameter">                  <code>merge_columns</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.add_to_index(merge_columns)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, allows schema evolution by merging new columns with existing ones.
Set to False for strict schema enforcement (will raise an error if schemas don't match).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_to_index</span><span class="p">(</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>    <span class="n">include_all_context</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="n">filepath_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="n">replace_existing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="n">merge_columns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">    Add or update an entry in the shared CSV index file using IndexWriter.</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">    - Logs the file&#39;s path and associated context variables to a</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">        shared CSV index file.</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">    - Uses IndexWriter to safely handle concurrent writes and schema evolution.</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">    **When to Use It**:</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    - Use this method to maintain a centralized record of saved</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">    files for auditing or debugging.</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">    **Relevant Writer Parameters**</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">    ------------------------------</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">    - The `index_filename` parameter allows you to specify a</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">    custom filename for the index file.</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">    By default, it will be named after the `root_directory`</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">    with `_index.csv` appended.</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">    - If the index file already exists in the root directory,</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">    it will overwrite it unless</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">    the `overwrite_index` parameter is set to `False`.</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">    - The `absolute_paths_in_index` parameter controls whether</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">    the paths in the index file are absolute or relative to the</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">    `root_directory`, with `False` being the default.</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">    path : Path</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">        The file path being saved.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">    include_all_context : bool, default=True</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">        If True, write existing context variables passed into writer and</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        the additional context to the CSV.</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">        If False, determines only the context keys parsed from the</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">        `filename_format` (excludes all other context variables, and</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        unused context keys).</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">    filepath_column : str, default=&quot;path&quot;</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">        The name of the column to store the file path. Defaults to &quot;path&quot;.</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">    replace_existing : bool, default=False</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">        If True, checks if the file path already exists in the index and</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        replaces it.</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">    merge_columns : bool, default=True</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">        If True, allows schema evolution by merging new columns with existing ones.</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">        Set to False for strict schema enforcement (will raise an error if schemas don&#39;t match).</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>    <span class="c1"># Prepare context data</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>    <span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span class="c1"># Determine which context to include</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>    <span class="k">if</span> <span class="n">include_all_context</span><span class="p">:</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="c1"># Only include keys from the pattern resolver</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern_resolver</span><span class="o">.</span><span class="n">keys</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>        <span class="p">}</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>    <span class="c1"># Resolve the path according to configuration</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>    <span class="n">resolved_path</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>        <span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">absolute_paths_in_index</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>        <span class="k">else</span> <span class="n">path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_directory</span><span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="p">)</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>    <span class="c1"># Write the entry to the index file</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index_writer</span><span class="o">.</span><span class="n">write_entry</span><span class="p">(</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>            <span class="n">path</span><span class="o">=</span><span class="n">resolved_path</span><span class="p">,</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>            <span class="n">filepath_column</span><span class="o">=</span><span class="n">filepath_column</span><span class="p">,</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="n">replace_existing</span><span class="o">=</span><span class="n">replace_existing</span><span class="p">,</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="n">merge_columns</span><span class="o">=</span><span class="n">merge_columns</span><span class="p">,</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>        <span class="p">)</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>    <span class="k">except</span> <span class="p">(</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>        <span class="n">IndexSchemaMismatchError</span><span class="p">,</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>        <span class="n">IndexReadError</span><span class="p">,</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>        <span class="n">IndexWriteError</span><span class="p">,</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="n">IndexWriterError</span><span class="p">,</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>    <span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="sa">f</span><span class="s2">&quot;Error writing to index file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">e</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="p">)</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="k">raise</span> <span class="n">WriterIndexError</span><span class="p">(</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>            <span class="sa">f</span><span class="s2">&quot;Error writing to index file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>            <span class="n">writer</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">general_e</span><span class="p">:</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>        <span class="k">raise</span> <span class="n">general_e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_context</span>


<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.clear_context" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">clear_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear the context for the writer.</p>
<p>Useful for resetting the context after using <code>preview_path</code> or <code>save</code>
and want to make sure that the context is empty for new operations.</p>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="k">def</span><span class="w"> </span><span class="nf">clear_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    Clear the context for the writer.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">    Useful for resetting the context after using `preview_path` or `save`</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    and want to make sure that the context is empty for new operations.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">preview_path</span>


<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">preview_path</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;**kwargs&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Pre-checking file existence and setting up the writer context.</p>
<p>Meant to be used by users to skip expensive computations if a file
already exists and you dont want to overwrite it.
Only difference between this and resolve_path is that this method
does not return the path if the file exists and the mode is set to
<code>SKIP</code>.</p>
<p>This is because the <code>.save()</code> method should be able to return
the path even if the file exists.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Pre-checks the file path based on context without writing the file.</li>
<li>Returns <code>None</code> if the file exists and the mode is set to <code>SKIP</code>.</li>
<li>Raises a <code>FileExistsError</code> if the mode is set to <code>FAIL</code>.</li>
<li>An added benefit of using <code>preview_path</code> is that it automatically
caches the context variables for future use, and <code>save()</code> can be called
without passing in the context variables again.</li>
</ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Main idea here is to allow users to save computation if they choose to
skip existing files.</p>
<p>i.e. if file exists and mode is <strong><code>SKIP</code></strong>, we return
<code>None</code>, so the user can skip the computation.</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">nifti_writer</span><span class="o">.</span><span class="n">preview_path</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File already exists. Skipping computation.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="k">continue</span> <span class="c1"># could be `break` or `return` depending on the use case</span>
</code></pre></div>
    <p>if the mode is <strong><code>FAIL</code></strong>, we raise an error if the file exists, so user
doesnt have to perform expensive computation only to fail when saving.</p>


<details class="**useful-feature**" open>
  <summary><strong>Useful Feature</strong></summary>
  <p>The context is saved in the instance, so running
<code>.save()</code> after this will use the same context, and user can optionally
update the context with new values passed to <code>.save()</code>.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="n">path</span> <span class="o">:=</span> <span class="n">writer</span><span class="o">.</span><span class="n">preview_path</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span>     <span class="o">...</span> <span class="c1"># do some expensive computation to generate the data</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span>     <span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<code>.save()</code> automatically uses the context for <code>subject</code> and <code>name</code> we
passed to <code>preview_path</code></p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)" class="doc doc-heading doc-heading-parameter">                  <code>**kwargs</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.preview_path(**kwargs)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for resolving the filename and validating existence.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file exists and the mode is <code>SKIP</code>, returns <code>None</code>. if the file
exists and the mode is FAIL, raises a <code>FileExistsError</code>. If the file
exists and the mode is OVERWRITE, logs a debug message and returns
the path.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="k">def</span><span class="w"> </span><span class="nf">preview_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">    Pre-checking file existence and setting up the writer context.</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">    Meant to be used by users to skip expensive computations if a file</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="sd">    already exists and you dont want to overwrite it.</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">    Only difference between this and resolve_path is that this method</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">    does not return the path if the file exists and the mode is set to</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">    `SKIP`.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    This is because the `.save()` method should be able to return</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">    the path even if the file exists.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">    - Pre-checks the file path based on context without writing the file.</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    - Returns `None` if the file exists and the mode is set to `SKIP`.</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">    - Raises a `FileExistsError` if the mode is set to `FAIL`.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    - An added benefit of using `preview_path` is that it automatically</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">    caches the context variables for future use, and `save()` can be called</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">    without passing in the context variables again.</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="sd">    --------</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">    Main idea here is to allow users to save computation if they choose to</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">    skip existing files.</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">    i.e. if file exists and mode is **`SKIP`**, we return</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">    `None`, so the user can skip the computation.</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">    &gt;&gt;&gt; if nifti_writer.preview_path(subject=&quot;math&quot;, name=&quot;test&quot;) is None:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">    &gt;&gt;&gt;     logger.info(&quot;File already exists. Skipping computation.&quot;)</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    &gt;&gt;&gt;     continue # could be `break` or `return` depending on the use case</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">    if the mode is **`FAIL`**, we raise an error if the file exists, so user</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">    doesnt have to perform expensive computation only to fail when saving.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">    **Useful Feature**</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">    ----------------------</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">    The context is saved in the instance, so running</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">    `.save()` after this will use the same context, and user can optionally</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    update the context with new values passed to `.save()`.</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">    &gt;&gt;&gt; if path := writer.preview_path(subject=&quot;math&quot;, name=&quot;test&quot;):</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    &gt;&gt;&gt;     ... # do some expensive computation to generate the data</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    &gt;&gt;&gt;     writer.save(data)</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    ```</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    `.save()` automatically uses the context for `subject` and `name` we</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">    passed to `preview_path`</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">    **kwargs : Any</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        Parameters for resolving the filename and validating existence.</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    ------</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">    Path | None</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">        If the file exists and the mode is `SKIP`, returns `None`. if the file</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">        exists and the mode is FAIL, raises a `FileExistsError`. If the file</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">        exists and the mode is OVERWRITE, logs a debug message and returns</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">        the path.</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    ------</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    FileExistsError</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        If the file exists and the mode is FAIL.</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="n">out_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_path</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>        <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="k">elif</span> <span class="n">out_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Path </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> is already a directory that exists.&quot;</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; Use a different filename format or context to avoid this.&quot;</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="k">raise</span> <span class="ne">IsADirectoryError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>    <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">existing_file_mode</span><span class="p">:</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">SKIP</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">FAIL</span><span class="p">:</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> already exists.&quot;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>            <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">OVERWRITE</span><span class="p">:</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>                <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> exists. Deleting and overwriting.&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="p">)</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="n">out_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span class="k">return</span> <span class="n">out_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">resolve_path</span>


<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">resolve_path</span><span class="p">(</span><span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;**kwargs&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate a file path based on the filename format, subject ID, and
additional parameters.</p>
<p>Meant to be used by developers when creating a new writer class
and used internally by the <code>save</code> method.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Dynamically generates a file path based on the provided context and
filename format.</li>
</ul>
<p><strong>When to Use It</strong>:</p>
<ul>
<li>This method is meant to be used in the <code>save</code> method to determine the
file’s target location, but can also be used by external code to
generate paths.</li>
<li>It ensures you’re working with a valid path and can handle file
existence scenarios.</li>
<li>Only raises <code>FileExistsError</code> if the file already exists and the mode
is set to <code>FAIL</code>.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)" class="doc doc-heading doc-heading-parameter">                  <code>**kwargs</code>
<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.resolve_path(**kwargs)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for resolving the filename and validating existence.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>resolved_path</code></td>            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resolved path for the file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="k">def</span><span class="w"> </span><span class="nf">resolve_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">    Generate a file path based on the filename format, subject ID, and</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="sd">    additional parameters.</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">    Meant to be used by developers when creating a new writer class</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">    and used internally by the `save` method.</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">    - Dynamically generates a file path based on the provided context and</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    filename format.</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    **When to Use It**:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">    - This method is meant to be used in the `save` method to determine the</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">    file’s target location, but can also be used by external code to</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">    generate paths.</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    - It ensures you’re working with a valid path and can handle file</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">    existence scenarios.</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    - Only raises `FileExistsError` if the file already exists and the mode</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">    is set to `FAIL`.</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">    **kwargs : Any</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        Parameters for resolving the filename and validating existence.</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">    -------</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">    resolved_path: Path</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">        The resolved path for the file.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">    ------</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    FileExistsError</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">        If the file already exists and the mode is set to FAIL.</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="n">out_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_path</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_dirs</span><span class="p">:</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_directory_exists</span><span class="p">(</span><span class="n">out_path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span class="c1"># should we raise this error here?</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="c1"># elif not out_path.parent.exists():</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="c1">#     msg = f&quot;Directory {out_path.parent} does not exist.&quot;</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="c1">#     raise DirectoryNotFoundError(msg)</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>    <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">existing_file_mode</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">SKIP</span><span class="p">:</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>            <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">FAIL</span><span class="p">:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> already exists.&quot;</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">OVERWRITE</span><span class="p">:</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting existing </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> and overwriting.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>            <span class="n">out_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="k">return</span> <span class="n">out_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">save</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">save</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save(data)">data</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.ContentType">ContentType</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">**</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.save(**kwargs)">kwargs</span></span><span class="p">:</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Any">Any</span></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Abstract method for writing data. Must be implemented by subclasses.</p>
<p>Can use resolve_path() to get the output path and write the data to it.</p>
<p>For efficiency, use self.context to access the context variables,
updating them with the kwargs passed from the save method.</p>
<p>This will help simplify repeated saves with similar context variables.</p>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">ContentType</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">    Abstract method for writing data. Must be implemented by subclasses.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">    Can use resolve_path() to get the output path and write the data to it.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">    For efficiency, use self.context to access the context variables,</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    updating them with the kwargs passed from the save method.</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">    This will help simplify repeated saves with similar context variables.</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_context</span>


<a href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">set_context</span><span class="p">(</span><span class="o">**</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.AbstractBaseWriter.set_context(**kwargs)">kwargs</span></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the context for the writer.</p>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">    Set the context for the writer.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="imgtools.io.writers.abstract_base_writer.ExampleWriter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExampleWriter</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter" class="headerlink" title="Permanent link">#</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">ExampleWriter</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(root_directory)">root_directory</span></span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span> <span class="o">=</span> <span class="n"><span title="dataclasses">dataclasses</span></span><span class="o">.</span><span class="n"><span title="dataclasses.field">field</span></span><span class="p">(),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(filename_format)">filename_format</span></span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="n"><span title="dataclasses">dataclasses</span></span><span class="o">.</span><span class="n"><span title="dataclasses.field">field</span></span><span class="p">(),</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(create_dirs)">create_dirs</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(existing_file_mode)">existing_file_mode</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ExistingFileMode&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExistingFileMode&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode">ExistingFileMode</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ExistingFileMode&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExistingFileMode&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode">ExistingFileMode</a></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExistingFileMode.FAIL">FAIL</span></span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(sanitize_filenames)">sanitize_filenames</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(context)">context</span></span><span class="p">:</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Dict">Dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dict">dict</span></span><span class="p">(),</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(overwrite_index)">overwrite_index</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(absolute_paths_in_index)">absolute_paths_in_index</span></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter(index_filename)">index_filename</span></span><span class="p">:</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a>.<span title="imgtools.io">io</span>.<span title="imgtools.io.writers">writers</span>.<a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a>.<a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AbstractBaseWriter&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter">AbstractBaseWriter</a>[<span title="str">str</span>]</code></p>


        <p>A concrete implementation of AbstractBaseWriter for demonstration.</p>








<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;add_to_index&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index">add_to_index</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Add or update an entry in the shared CSV index file using IndexWriter.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;clear_context&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context">clear_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Clear the context for the writer.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;preview_path&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path">preview_path</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Pre-checking file existence and setting up the writer context.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;resolve_path&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path">resolve_path</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generate a file path based on the filename format, subject ID, and</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;save&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.save&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save">save</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Abstract method for writing data. Must be implemented by subclasses.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;set_context&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context">set_context</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Set the context for the writer.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>





  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.index_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">index_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.index_file" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">index_file</span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the path to the index CSV file.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_to_index</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">add_to_index</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;path&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)">path</a></span><span class="p">:</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;include_all_context&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)">include_all_context</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;filepath_column&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)">filepath_column</a></span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;replace_existing&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)">replace_existing</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;merge_columns&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)">merge_columns</a></span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add or update an entry in the shared CSV index file using IndexWriter.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Logs the file's path and associated context variables to a
    shared CSV index file.</li>
<li>Uses IndexWriter to safely handle concurrent writes and schema evolution.</li>
</ul>
<p><strong>When to Use It</strong>:</p>
<ul>
<li>Use this method to maintain a centralized record of saved
files for auditing or debugging.</li>
</ul>


<details class="**relevant-writer-parameters**" open>
  <summary><strong>Relevant Writer Parameters</strong></summary>
  <ul>
<li>
<p>The <code>index_filename</code> parameter allows you to specify a
custom filename for the index file.
By default, it will be named after the <code>root_directory</code>
with <code>_index.csv</code> appended.</p>
</li>
<li>
<p>If the index file already exists in the root directory,
it will overwrite it unless
the <code>overwrite_index</code> parameter is set to <code>False</code>.</p>
</li>
<li>
<p>The <code>absolute_paths_in_index</code> parameter controls whether
the paths in the index file are absolute or relative to the
<code>root_directory</code>, with <code>False</code> being the default.</p>
</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)" class="doc doc-heading doc-heading-parameter">                  <code>path</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(path)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path being saved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)" class="doc doc-heading doc-heading-parameter">                  <code>include_all_context</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(include_all_context)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, write existing context variables passed into writer and
the additional context to the CSV.
If False, determines only the context keys parsed from the
<code>filename_format</code> (excludes all other context variables, and
unused context keys).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)" class="doc doc-heading doc-heading-parameter">                  <code>filepath_column</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(filepath_column)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the column to store the file path. Defaults to "path".</p>
              </div>
            </td>
            <td>
                  <code>&#34;path&#34;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)" class="doc doc-heading doc-heading-parameter">                  <code>replace_existing</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(replace_existing)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, checks if the file path already exists in the index and
replaces it.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)" class="doc doc-heading doc-heading-parameter">                  <code>merge_columns</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.add_to_index(merge_columns)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, allows schema evolution by merging new columns with existing ones.
Set to False for strict schema enforcement (will raise an error if schemas don't match).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_to_index</span><span class="p">(</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>    <span class="n">include_all_context</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="n">filepath_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="n">replace_existing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="n">merge_columns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">    Add or update an entry in the shared CSV index file using IndexWriter.</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">    - Logs the file&#39;s path and associated context variables to a</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">        shared CSV index file.</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">    - Uses IndexWriter to safely handle concurrent writes and schema evolution.</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">    **When to Use It**:</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    - Use this method to maintain a centralized record of saved</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">    files for auditing or debugging.</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">    **Relevant Writer Parameters**</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">    ------------------------------</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">    - The `index_filename` parameter allows you to specify a</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">    custom filename for the index file.</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">    By default, it will be named after the `root_directory`</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">    with `_index.csv` appended.</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">    - If the index file already exists in the root directory,</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">    it will overwrite it unless</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">    the `overwrite_index` parameter is set to `False`.</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">    - The `absolute_paths_in_index` parameter controls whether</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">    the paths in the index file are absolute or relative to the</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">    `root_directory`, with `False` being the default.</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">    path : Path</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">        The file path being saved.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">    include_all_context : bool, default=True</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">        If True, write existing context variables passed into writer and</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        the additional context to the CSV.</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">        If False, determines only the context keys parsed from the</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">        `filename_format` (excludes all other context variables, and</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        unused context keys).</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">    filepath_column : str, default=&quot;path&quot;</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">        The name of the column to store the file path. Defaults to &quot;path&quot;.</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">    replace_existing : bool, default=False</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">        If True, checks if the file path already exists in the index and</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        replaces it.</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">    merge_columns : bool, default=True</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">        If True, allows schema evolution by merging new columns with existing ones.</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">        Set to False for strict schema enforcement (will raise an error if schemas don&#39;t match).</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>    <span class="c1"># Prepare context data</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>    <span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span class="c1"># Determine which context to include</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>    <span class="k">if</span> <span class="n">include_all_context</span><span class="p">:</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="c1"># Only include keys from the pattern resolver</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern_resolver</span><span class="o">.</span><span class="n">keys</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>        <span class="p">}</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>    <span class="c1"># Resolve the path according to configuration</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>    <span class="n">resolved_path</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>        <span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">absolute_paths_in_index</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>        <span class="k">else</span> <span class="n">path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_directory</span><span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="p">)</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>    <span class="c1"># Write the entry to the index file</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index_writer</span><span class="o">.</span><span class="n">write_entry</span><span class="p">(</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>            <span class="n">path</span><span class="o">=</span><span class="n">resolved_path</span><span class="p">,</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>            <span class="n">filepath_column</span><span class="o">=</span><span class="n">filepath_column</span><span class="p">,</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="n">replace_existing</span><span class="o">=</span><span class="n">replace_existing</span><span class="p">,</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="n">merge_columns</span><span class="o">=</span><span class="n">merge_columns</span><span class="p">,</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>        <span class="p">)</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>    <span class="k">except</span> <span class="p">(</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>        <span class="n">IndexSchemaMismatchError</span><span class="p">,</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>        <span class="n">IndexReadError</span><span class="p">,</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>        <span class="n">IndexWriteError</span><span class="p">,</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="n">IndexWriterError</span><span class="p">,</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>    <span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="sa">f</span><span class="s2">&quot;Error writing to index file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">e</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="p">)</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="k">raise</span> <span class="n">WriterIndexError</span><span class="p">(</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>            <span class="sa">f</span><span class="s2">&quot;Error writing to index file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>            <span class="n">writer</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">general_e</span><span class="p">:</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>        <span class="k">raise</span> <span class="n">general_e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">clear_context</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.clear_context" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">clear_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear the context for the writer.</p>
<p>Useful for resetting the context after using <code>preview_path</code> or <code>save</code>
and want to make sure that the context is empty for new operations.</p>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="k">def</span><span class="w"> </span><span class="nf">clear_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    Clear the context for the writer.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">    Useful for resetting the context after using `preview_path` or `save`</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    and want to make sure that the context is empty for new operations.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">preview_path</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">preview_path</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;**kwargs&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing">typing</span></span><span class="o">.</span><span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Pre-checking file existence and setting up the writer context.</p>
<p>Meant to be used by users to skip expensive computations if a file
already exists and you dont want to overwrite it.
Only difference between this and resolve_path is that this method
does not return the path if the file exists and the mode is set to
<code>SKIP</code>.</p>
<p>This is because the <code>.save()</code> method should be able to return
the path even if the file exists.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Pre-checks the file path based on context without writing the file.</li>
<li>Returns <code>None</code> if the file exists and the mode is set to <code>SKIP</code>.</li>
<li>Raises a <code>FileExistsError</code> if the mode is set to <code>FAIL</code>.</li>
<li>An added benefit of using <code>preview_path</code> is that it automatically
caches the context variables for future use, and <code>save()</code> can be called
without passing in the context variables again.</li>
</ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Main idea here is to allow users to save computation if they choose to
skip existing files.</p>
<p>i.e. if file exists and mode is <strong><code>SKIP</code></strong>, we return
<code>None</code>, so the user can skip the computation.</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">nifti_writer</span><span class="o">.</span><span class="n">preview_path</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File already exists. Skipping computation.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="k">continue</span> <span class="c1"># could be `break` or `return` depending on the use case</span>
</code></pre></div>
    <p>if the mode is <strong><code>FAIL</code></strong>, we raise an error if the file exists, so user
doesnt have to perform expensive computation only to fail when saving.</p>


<details class="**useful-feature**" open>
  <summary><strong>Useful Feature</strong></summary>
  <p>The context is saved in the instance, so running
<code>.save()</code> after this will use the same context, and user can optionally
update the context with new values passed to <code>.save()</code>.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="n">path</span> <span class="o">:=</span> <span class="n">writer</span><span class="o">.</span><span class="n">preview_path</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;math&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span>     <span class="o">...</span> <span class="c1"># do some expensive computation to generate the data</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span>     <span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<code>.save()</code> automatically uses the context for <code>subject</code> and <code>name</code> we
passed to <code>preview_path</code></p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)" class="doc doc-heading doc-heading-parameter">                  <code>**kwargs</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.preview_path(**kwargs)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for resolving the filename and validating existence.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file exists and the mode is <code>SKIP</code>, returns <code>None</code>. if the file
exists and the mode is FAIL, raises a <code>FileExistsError</code>. If the file
exists and the mode is OVERWRITE, logs a debug message and returns
the path.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="k">def</span><span class="w"> </span><span class="nf">preview_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">    Pre-checking file existence and setting up the writer context.</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">    Meant to be used by users to skip expensive computations if a file</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="sd">    already exists and you dont want to overwrite it.</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">    Only difference between this and resolve_path is that this method</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">    does not return the path if the file exists and the mode is set to</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">    `SKIP`.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    This is because the `.save()` method should be able to return</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">    the path even if the file exists.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">    - Pre-checks the file path based on context without writing the file.</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    - Returns `None` if the file exists and the mode is set to `SKIP`.</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">    - Raises a `FileExistsError` if the mode is set to `FAIL`.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    - An added benefit of using `preview_path` is that it automatically</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">    caches the context variables for future use, and `save()` can be called</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">    without passing in the context variables again.</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="sd">    --------</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">    Main idea here is to allow users to save computation if they choose to</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">    skip existing files.</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">    i.e. if file exists and mode is **`SKIP`**, we return</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">    `None`, so the user can skip the computation.</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">    &gt;&gt;&gt; if nifti_writer.preview_path(subject=&quot;math&quot;, name=&quot;test&quot;) is None:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">    &gt;&gt;&gt;     logger.info(&quot;File already exists. Skipping computation.&quot;)</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    &gt;&gt;&gt;     continue # could be `break` or `return` depending on the use case</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">    if the mode is **`FAIL`**, we raise an error if the file exists, so user</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">    doesnt have to perform expensive computation only to fail when saving.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">    **Useful Feature**</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">    ----------------------</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">    The context is saved in the instance, so running</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">    `.save()` after this will use the same context, and user can optionally</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    update the context with new values passed to `.save()`.</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">    &gt;&gt;&gt; if path := writer.preview_path(subject=&quot;math&quot;, name=&quot;test&quot;):</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    &gt;&gt;&gt;     ... # do some expensive computation to generate the data</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    &gt;&gt;&gt;     writer.save(data)</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    ```</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    `.save()` automatically uses the context for `subject` and `name` we</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">    passed to `preview_path`</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">    **kwargs : Any</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        Parameters for resolving the filename and validating existence.</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    ------</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">    Path | None</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">        If the file exists and the mode is `SKIP`, returns `None`. if the file</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">        exists and the mode is FAIL, raises a `FileExistsError`. If the file</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">        exists and the mode is OVERWRITE, logs a debug message and returns</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">        the path.</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    ------</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    FileExistsError</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        If the file exists and the mode is FAIL.</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="n">out_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_path</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>        <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="k">elif</span> <span class="n">out_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Path </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> is already a directory that exists.&quot;</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot; Use a different filename format or context to avoid this.&quot;</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="k">raise</span> <span class="ne">IsADirectoryError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>    <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">existing_file_mode</span><span class="p">:</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">SKIP</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">FAIL</span><span class="p">:</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> already exists.&quot;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>            <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">OVERWRITE</span><span class="p">:</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>                <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> exists. Deleting and overwriting.&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="p">)</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="n">out_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span class="k">return</span> <span class="n">out_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">resolve_path</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">resolve_path</span><span class="p">(</span><span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;**kwargs&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate a file path based on the filename format, subject ID, and
additional parameters.</p>
<p>Meant to be used by developers when creating a new writer class
and used internally by the <code>save</code> method.</p>
<p><strong>What It Does</strong>:</p>
<ul>
<li>Dynamically generates a file path based on the provided context and
filename format.</li>
</ul>
<p><strong>When to Use It</strong>:</p>
<ul>
<li>This method is meant to be used in the <code>save</code> method to determine the
file’s target location, but can also be used by external code to
generate paths.</li>
<li>It ensures you’re working with a valid path and can handle file
existence scenarios.</li>
<li>Only raises <code>FileExistsError</code> if the file already exists and the mode
is set to <code>FAIL</code>.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)" class="doc doc-heading doc-heading-parameter">                  <code>**kwargs</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.resolve_path(**kwargs)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters for resolving the filename and validating existence.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>resolved_path</code></td>            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resolved path for the file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="k">def</span><span class="w"> </span><span class="nf">resolve_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">    Generate a file path based on the filename format, subject ID, and</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="sd">    additional parameters.</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">    Meant to be used by developers when creating a new writer class</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">    and used internally by the `save` method.</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">    **What It Does**:</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">    - Dynamically generates a file path based on the provided context and</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    filename format.</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    **When to Use It**:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">    - This method is meant to be used in the `save` method to determine the</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">    file’s target location, but can also be used by external code to</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">    generate paths.</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    - It ensures you’re working with a valid path and can handle file</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">    existence scenarios.</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    - Only raises `FileExistsError` if the file already exists and the mode</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">    is set to `FAIL`.</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">    **kwargs : Any</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        Parameters for resolving the filename and validating existence.</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">    -------</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">    resolved_path: Path</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">        The resolved path for the file.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">    ------</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    FileExistsError</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">        If the file already exists and the mode is set to FAIL.</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="n">out_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_path</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_dirs</span><span class="p">:</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_directory_exists</span><span class="p">(</span><span class="n">out_path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span class="c1"># should we raise this error here?</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="c1"># elif not out_path.parent.exists():</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="c1">#     msg = f&quot;Directory {out_path.parent} does not exist.&quot;</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="c1">#     raise DirectoryNotFoundError(msg)</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>    <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">existing_file_mode</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">SKIP</span><span class="p">:</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>            <span class="k">return</span> <span class="n">out_path</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">FAIL</span><span class="p">:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> already exists.&quot;</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="k">case</span> <span class="n">ExistingFileMode</span><span class="o">.</span><span class="n">OVERWRITE</span><span class="p">:</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting existing </span><span class="si">{</span><span class="n">out_path</span><span class="si">}</span><span class="s2"> and overwriting.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>            <span class="n">out_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="k">return</span> <span class="n">out_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.save" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">save</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">save</span><span class="p">(</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter.save(data)">data</span></span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code&gt;**kwargs&lt;/code&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pathlib">pathlib</span></span><span class="o">.</span><span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Abstract method for writing data. Must be implemented by subclasses.</p>
<p>Can use resolve_path() to get the output path and write the data to it.</p>
<p>For efficiency, use self.context to access the context variables,
updating them with the kwargs passed from the save method.</p>
<p>This will help simplify repeated saves with similar context variables.</p>
<p>Save content to a file with the resolved path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.save(content)" class="doc doc-heading doc-heading-parameter">                  <code>content</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(content)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content to write to the file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
<h5 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)" class="doc doc-heading doc-heading-parameter">                  <code>**kwargs</code>
<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.save(**kwargs)" class="headerlink" title="Permanent link">#</a></h5>            </td>
            <td>
                  <code><span title="typing">typing</span>.<span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional context for filename generation.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib">pathlib</span>.<span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the saved file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">    Save content to a file with the resolved path.</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">    content : str</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        The content to write to the file.</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">    **kwargs : Any</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">        Additional context for filename generation.</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">    -------</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">    Path</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">        The path to the saved file.</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>    <span class="c1"># Resolve the output file path</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>    <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_path</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span class="c1"># Write content to the file</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>    <span class="k">with</span> <span class="n">output_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_index</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">replace_existing</span><span class="o">=</span><span class="n">output_path</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>    <span class="k">return</span> <span class="n">output_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">set_context</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">set_context</span><span class="p">(</span><span class="o">**</span><span class="n"><span title="imgtools.io.writers.abstract_base_writer.ExampleWriter.set_context(**kwargs)">kwargs</span></span><span class="p">:</span> <span class="n"><span title="object">object</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the context for the writer.</p>


            <details class="quote">
              <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">    Set the context for the writer.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="imgtools.io.writers.abstract_base_writer.ExistingFileMode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExistingFileMode</span>


<a href="#imgtools.io.writers.abstract_base_writer.ExistingFileMode" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum">enum</span>.<span title="enum.Enum">Enum</span></code></p>


        <p>Enum to specify handling behavior for existing files.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.ExistingFileMode.OVERWRITE">OVERWRITE</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Overwrite the existing file. Logs as debug and continues with the
operation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.ExistingFileMode.FAIL">FAIL</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fail the operation if the file exists. Logs as error and raises a
FileExistsError.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="imgtools.io.writers.abstract_base_writer.ExistingFileMode.SKIP">SKIP</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Skip the operation if the file exists. Meant to be used for previewing
the path before any expensive computation. <code>preview_path()</code> will return
None if the file exists. <code>resolve_path()</code> will still return the path
even if the file exists. The writer's <code>save</code> method should handle the
file existence if set to SKIP.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="imgtools.io.writers.abstract_base_writer.WriterIndexError" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">WriterIndexError</span>


<a href="#imgtools.io.writers.abstract_base_writer.WriterIndexError" class="headerlink" title="Permanent link">#</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">WriterIndexError</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.WriterIndexError(message)">message</span></span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n"><span title="imgtools.io.writers.abstract_base_writer.WriterIndexError(writer)">writer</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" href="../../../../cli/imgtools/#imgtools">imgtools</a></span><span class="o">.</span><span class="n"><span title="imgtools.io">io</span></span><span class="o">.</span><span class="n"><span title="imgtools.io.writers">writers</span></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-module&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-module-name&quot;&gt;abstract_base_writer&lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer">abstract_base_writer</a></span><span class="o">.</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AbstractBaseWriter&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;imgtools.io.writers.abstract_base_writer.AbstractBaseWriter&lt;/code&gt;)" href="#imgtools.io.writers.abstract_base_writer.AbstractBaseWriter">AbstractBaseWriter</a></span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Exception raised when a writer encounters an error while interacting with its index.</p>
<p>This exception wraps the underlying IndexWriter exceptions to provide a clearer
context about the writer that encountered the error.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/imgtools/io/writers/abstract_base_writer.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="n">writer</span><span class="p">:</span> <span class="n">AbstractBaseWriter</span><span class="p">,</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">writer</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>








  <aside class="md-source-file">
    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:79344667+declankorda@users.noreply.github.com">Declan Korda</a>
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../validators/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Validators">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Validators
              </div>
            </div>
          </a>
        
        
          
          <a href="../index_writer/" class="md-footer__link md-footer__link--next" aria-label="Next: Index writer">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Index writer
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/bhklab/" target="_blank" rel="noopener" title="Check out our GitHub!" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/in/bhklab/" target="_blank" rel="noopener" title="Connect with us on LinkedIn!" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>